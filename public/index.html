<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World Caf√© Platform</title>
    
    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/png" href="/coffee-logo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/coffee-logo.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/coffee-logo.png">
    <link rel="icon" type="image/png" sizes="48x48" href="/coffee-logo.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/coffee-logo.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/coffee-logo.png">
    <link rel="apple-touch-icon" href="/coffee-logo.png">
    
    <!-- Meta tags -->
    <meta name="description" content="World Caf√© Platform - Facilitating meaningful conversations and collaborative discussions across multiple tables">
    <meta name="theme-color" content="#8C4A24">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <link rel="stylesheet" href="styles.css?v=202509041831">
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js" 
            onerror="console.warn('Failed to load jsQR from CDN, falling back to alternative');">
    </script>
    <!-- Fallback CDN for jsQR -->
    <script>
        // Check if jsQR loaded successfully, if not try alternative CDN
        if (typeof jsQR === 'undefined') {
            console.log('Loading jsQR from backup CDN...');
            const script = document.createElement('script');
            script.src = 'https://unpkg.com/jsqr@1.4.0/dist/jsQR.js';
            script.onerror = () => {
                console.error('Failed to load jsQR from backup CDN. QR scanning may not work.');
            };
            document.head.appendChild(script);
        }
    </script>
    <script src="logger.js"></script>
    
</head>
<body>
    <div id="app" class="app">
        <!-- Main Navigation -->
        <header class="app-header nav-header">
            <nav class="nav-container" aria-label="Primary">
                <!-- Brand Section -->
                <div class="nav-brand">
                    <div class="nav-logo">
                        <span>‚òï</span>
                    </div>
                    <h1 class="nav-title">World Caf√© Platform</h1>
                </div>

                <!-- Status Indicator -->
                <div class="nav-status">
                    <div id="connectionStatus" class="status-indicator" title="Connection status"></div>
                    <span class="status-text">Online</span>
                </div>

                <!-- Navigation Buttons -->
                <div class="nav-actions">
                    <!-- Mobile Menu Toggle -->
                    <button id="mobileMenuToggle" class="mobile-menu-toggle">‚ò∞</button>

                    <!-- Desktop Navigation Menu -->
                    <div id="navMenu" class="nav-menu">
                        <button id="homeBtn" class="btn btn-secondary btn-sm">
                            <span>üè†</span> Home
                        </button>

                        <button id="adminBtn" class="btn btn-secondary btn-sm" title="Settings">
                            ‚öôÔ∏è
                        </button>
                        
                        <button id="createSessionBtn" class="btn btn-primary">
                            New Session
                        </button>
                    </div>
                </div>
            </nav>
        </header>

        <!-- Main Content -->
        <main class="app-main main-content">
            <!-- Welcome Screen -->
            <div id="welcomeScreen" class="screen active">
                <section class="welcome-screen" aria-labelledby="welcomeTitle">
                    <div class="welcome-bg" aria-hidden="true"></div>
                    <div class="welcome-content">
                        <div class="welcome-hero">
                            <div class="welcome-logo" aria-hidden="true">
                                <span>‚òï</span>
                            </div>
                            <h1 id="welcomeTitle" class="welcome-title">World Caf√© Platform</h1>
                            <p class="welcome-subtitle">Facilitate meaningful conversations with digital recording and live transcription</p>
                        </div>
                        <div class="welcome-actions">
                            <button type="button" onclick="showCreateSession()" class="welcome-card">
                                <div class="welcome-card-icon" aria-hidden="true">üéØ</div>
                                <h3 class="welcome-card-title">Create New Session</h3>
                                <p class="welcome-card-description">Start a new World Caf√© discussion with customizable tables</p>
                            </button>
                            <button type="button" onclick="showJoinSession()" class="welcome-card">
                                <div class="welcome-card-icon" aria-hidden="true">üì¢</div>
                                <h3 class="welcome-card-title">Join Session</h3>
                                <p class="welcome-card-description">Join an existing session at your assigned table</p>
                            </button>
                            <button type="button" onclick="showSessionList()" class="welcome-card">
                                <div class="welcome-card-icon" aria-hidden="true">üìä</div>
                                <h3 class="welcome-card-title">View Sessions</h3>
                                <p class="welcome-card-description">Browse active and completed sessions with analytics</p>
                            </button>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Create Session Screen -->
            <div id="createSessionScreen" class="screen">
                <div class="screen-cover screen-cover--gradient">
                    <div class="screen-panel screen-panel--wizard">
                        <header class="screen-panel__header">
                            <button type="button" class="btn btn-ghost btn-icon" onclick="showWelcome()" aria-label="Back to welcome">‚Üê</button>
                            <div class="screen-panel__heading">
                                <h1 class="screen-panel__title">Create New Session</h1>
                                <p class="screen-panel__subtitle">Start a new World Caf√© discussion</p>
                            </div>
                            <span class="screen-panel__badge">
                                <span aria-hidden="true">üéØ</span>
                                New
                            </span>
                        </header>
                        <div class="screen-panel__body">
                            <form id="createSessionForm" class="form-grid form-grid--stacked" novalidate>
                                <div class="form-group">
                                    <label class="label label-required" for="sessionTitle">Session Title</label>
                                    <input id="sessionTitle" type="text" class="input" placeholder="Enter session title..." required autocomplete="off">
                                </div>
                                <div class="form-group">
                                    <label class="label" for="sessionDescription">Description</label>
                                    <textarea id="sessionDescription" class="textarea" rows="3" placeholder="Brief description of the session (optional)..."></textarea>
                                </div>
                                <div class="form-grid form-grid--two">
                                    <div class="form-group">
                                        <label class="label" for="sessionLanguage">Language</label>
                                        <select id="sessionLanguage" class="input">
                                            <option value="en-US">English (US)</option>
                                            <option value="en-GB">English (UK)</option>
                                            <option value="es-ES">Spanish (Spain)</option>
                                            <option value="es-MX">Spanish (Mexico)</option>
                                            <option value="fr-FR">French</option>
                                            <option value="it-IT">Italian</option>
                                            <option value="de-DE">German</option>
                                            <option value="pt-PT">Portuguese (Portugal)</option>
                                            <option value="pt-BR">Portuguese (Brazil)</option>
                                            <option value="nl-NL">Dutch</option>
                                            <option value="ja-JP">Japanese</option>
                                            <option value="ko-KR">Korean</option>
                                            <option value="zh-CN">Chinese (Simplified)</option>
                                            <option value="zh-TW">Chinese (Traditional)</option>
                                            <option value="ar-SA">Arabic</option>
                                            <option value="ru-RU">Russian</option>
                                            <option value="hi-IN">Hindi</option>
                                            <option value="tr-TR">Turkish</option>
                                            <option value="pl-PL">Polish</option>
                                            <option value="sv-SE">Swedish</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="label" for="tableCount">Number of Tables</label>
                                        <input id="tableCount" type="number" class="input" value="10" min="1" max="50">
                                    </div>
                                </div>
                                <div class="screen-panel__actions">
                                    <button type="button" class="btn btn-secondary btn-full" onclick="showWelcome()">Cancel</button>
                                    <button type="submit" class="btn btn-primary btn-full">Create Session</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Join Session Screen -->
            <div id="joinSessionScreen" class="screen">
                <div class="screen-cover screen-cover--gradient">
                    <div class="screen-panel screen-panel--wizard">
                        <header class="screen-panel__header">
                            <button type="button" class="btn btn-ghost btn-icon" onclick="showWelcome()" aria-label="Back to welcome">‚Üê</button>
                            <div class="screen-panel__heading">
                                <h1 class="screen-panel__title">Join Session</h1>
                                <p class="screen-panel__subtitle">Choose how you'd like to participate</p>
                            </div>
                            <span class="screen-panel__badge">
                                <span aria-hidden="true">üåê</span>
                                Join
                            </span>
                        </header>
                        <div class="screen-panel__body join-wizard">
                            <nav class="join-progress" aria-label="Join session steps">
                                <div class="join-progress__step join-progress__step--active" data-step="1">
                                    <span class="join-progress__index">1</span>
                                    <span class="join-progress__label">Choose Method</span>
                                </div>
                                <div class="join-progress__step" data-step="2">
                                    <span class="join-progress__index">2</span>
                                    <span class="join-progress__label">Pick Session</span>
                                </div>
                                <div class="join-progress__step" data-step="3">
                                    <span class="join-progress__index">3</span>
                                    <span class="join-progress__label">Select Table</span>
                                </div>
                            </nav>

                            <div id="joinStep1" class="join-step join-step--active">
                                <div class="join-methods">
                                    <div class="join-method selected" data-method="code" aria-pressed="true">
                                        <div class="join-method-icon">üîë</div>
                                        <h3 class="join-method-title">Session Code</h3>
                                        <p class="join-method-description">Enter a session, table code, or password to join instantly.</p>
                                        <div class="form-group">
                                            <label class="label" for="sessionCodeInput">Session/Table Code</label>
                                            <input id="sessionCodeInput" type="text" class="input" placeholder="Enter session or table code" maxlength="60" autocomplete="off" spellcheck="false">
                                        </div>
                                        <button type="button" class="btn btn-primary btn-full" onclick="joinWithSessionCode()">Join</button>
                                        <p class="helper-text helper-text--muted">Accepts session codes, table codes, admin passwords, or table passwords.</p>
                                    </div>
                                    <div class="join-method join-method--interactive" data-method="qr" onclick="showJoinQRScanner()" role="button" tabindex="0" aria-pressed="false">
                                        <div class="join-method-icon">üì∑</div>
                                        <h3 class="join-method-title">Scan QR Code</h3>
                                        <p class="join-method-description">Use your camera to scan a World Caf√© QR code and jump right in.</p>
                                        <button type="button" class="btn btn-secondary btn-full">Open Scanner</button>
                                    </div>
                                    <div class="join-method join-method--interactive" data-method="browse" onclick="selectJoinMethod('browse')" role="button" tabindex="0" aria-pressed="false">
                                        <div class="join-method-icon">üìö</div>
                                        <h3 class="join-method-title">Browse Sessions</h3>
                                        <p class="join-method-description">See all active sessions and choose your table from the list.</p>
                                        <button type="button" class="btn btn-secondary btn-full">Browse Sessions</button>
                                    </div>
                                </div>
                            </div>

                            <div id="joinStep2Browse" class="join-step">
                                <div class="join-step__header">
                                    <button type="button" class="btn btn-ghost" onclick="resetWizard()">‚Üê Back to options</button>
                                    <h3 class="join-step__title">Browse Active Sessions</h3>
                                    <p class="join-step__subtitle">Select a session to review details and pick a table.</p>
                                </div>
                                <div class="form-group">
                                    <label class="label" for="sessionSelect">Active Sessions</label>
                                    <select id="sessionSelect" class="input" onchange="handleSessionSelection()">
                                        <option value="">Loading sessions...</option>
                                    </select>
                                </div>
                            </div>

                            <div id="joinStep3" class="join-step">
                                <div class="join-step__header">
                                    <button type="button" class="btn btn-ghost" onclick="goToStep(2, currentJoinMethod)">‚Üê Back</button>
                                    <h3 class="join-step__title">Choose Table</h3>
                                    <p class="join-step__subtitle">Select your table to join the conversation.</p>
                                </div>
                                <div id="selectedSessionInfo" class="info-card" aria-live="polite"></div>
                                <div id="tableSelection" class="join-table-grid" role="list"></div>
                                <div class="join-step__actions">
                                    <button type="button" class="btn btn-secondary" onclick="goToStep(2, currentJoinMethod)">Back</button>
                                    <button type="button" id="finalJoinBtn" class="btn btn-primary" onclick="finalJoinTable()" disabled>Join Table</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Session Dashboard -->
            <div id="sessionDashboard" class="screen">
                <div class="screen-cover screen-cover--gradient">
                    <div class="session-shell">
                        <header class="session-shell__header">
                            <button type="button" class="btn btn-ghost btn-icon" onclick="showWelcome()" aria-label="Back to welcome">‚Üê</button>
                            <div class="session-shell__heading">
                                <h1 id="dashboardTitle" class="session-shell__title">Session Dashboard</h1>
                                <p class="session-shell__subtitle">Manage your World Caf√© session</p>
                                <div class="session-shell__code">
                                    <span>Session Code:</span>
                                    <span id="sessionCodeValue">-</span>
                                </div>
                            </div>
                            <div class="session-shell__meta">
                                <div id="sessionLanguageIndicator" class="language-pill">
                                    <span class="language-pill__flag">üåç</span>
                                    <span id="sessionLanguageText" class="language-pill__text">Language</span>
                                </div>
                                <div class="session-shell__actions">
                                    <button type="button" id="showQRCodesBtn" class="btn btn-secondary btn-sm" onclick="toggleQRCodesSection()">üì± QR Codes</button>
                                </div>
                            </div>
                        </header>
                        <div class="session-shell__body">
                            <section class="stat-grid">
                                <article class="stat-card">
                                    <div class="stat-card__icon">ü™ë</div>
                                    <div class="stat-card__label">Active Tables</div>
                                    <div class="stat-card__value" id="activeTableCount">0</div>
                                </article>
                                <article class="stat-card">
                                    <div class="stat-card__icon">üéôÔ∏è</div>
                                    <div class="stat-card__label">Recordings</div>
                                    <div class="stat-card__value" id="recordingCount">0</div>
                                    <div class="stat-card__meta">Total duration <span id="totalRecordingDuration">0m</span></div>
                                </article>
                                <article class="stat-card">
                                    <div class="stat-card__icon">üìù</div>
                                    <div class="stat-card__label">Transcriptions</div>
                                    <div class="stat-card__value" id="totalTranscriptions">0</div>
                                </article>
                                <article class="stat-card">
                                    <div class="stat-card__icon">üë•</div>
                                    <div class="stat-card__label">Speakers</div>
                                    <div class="stat-card__value" id="totalSpeakers">0</div>
                                </article>
                            </section>

                            <div class="session-shell__actions">
                                <button type="button" class="btn btn-secondary" onclick="toggleQRCodesSection()">üì± Toggle QR Codes</button>
                            </div>

                            <section id="qrCodesSection" class="card card--ghost is-hidden">
                                <header class="card__header">
                                    <h2 class="card__title">Session QR Codes</h2>
                                    <button type="button" class="btn btn-icon" onclick="toggleQRCodesSection()" aria-label="Close QR codes">‚úï</button>
                                </header>
                                <p class="card__subtitle">Share these QR codes to allow participants to join tables easily.</p>
                                <div id="qrCodesGrid" class="qr-grid"></div>
                                <div class="session-shell__actions">
                                    <button type="button" id="downloadAllQRBtn" class="btn btn-secondary btn-sm">üì• Download All</button>
                                    <button type="button" id="printQRBtn" class="btn btn-secondary btn-sm">üñ®Ô∏è Print</button>
                                </div>
                            </section>

                            <section class="card">
                                <header class="card__header">
                                    <h2 class="card__title">Active Tables</h2>
                                </header>
                                <div id="tablesGrid" class="tables-grid"></div>
                            </section>

                            <section id="sessionRecordingsSection" class="card" data-table-only="true">
                                <header class="card__header">
                                    <h2 class="card__title">Recordings</h2>
                                    <span id="sessionRecordingCountBadge" class="badge badge-neutral">0</span>
                                </header>
                                <div id="sessionRecordingsEmpty" class="empty-state">
                                    <div class="empty-state__icon">üéôÔ∏è</div>
                                    <h5 class="empty-state__title">View recordings per table</h5>
                                    <p class="empty-state__description">Open a table to download audio, reprocess transcripts, and manage live transcription.</p>
                                </div>
                                <div id="sessionRecordingsList" class="recording-list is-hidden" role="list"></div>
                            </section>

                        </div>
                    </div>
                </div>
            </div>
            <!-- Simplified Live Transcription Interface -->
            <div id="tableInterface" class="screen table-interface is-hidden">
                <div class="screen-panel screen-panel--table table-interface__container">
                    <header class="screen-panel__header table-interface__header">
                        <div class="table-interface__nav">
                            <button type="button" class="btn btn-ghost btn-icon" onclick="backToSession()" aria-label="Back to session">‚Üê</button>
                        </div>
                        <div class="screen-panel__heading table-interface__heading">
                            <h1 id="tableTitle" class="screen-panel__title table-interface__title">Live Transcription</h1>
                            <p id="sessionTitleHeader" class="screen-panel__subtitle table-interface__subtitle">Session Name</p>
                            <p
                                id="sessionDescriptionHeader"
                                class="screen-panel__subtitle table-interface__description"
                                hidden
                            ></p>
                            <p id="tableCodeDisplay" class="table-interface__meta">Table Code: <span id="tableCodeValue">-</span></p>
                        </div>
                        <div class="screen-panel__actions table-interface__status">
                            <span id="tableStatus" class="badge badge-primary">Ready</span>
                        </div>
                        <div class="table-interface__hero-meta" role="group" aria-label="Table quick stats">
                            <div class="table-hero-card" data-type="participants">
                                <span class="table-hero-label">Participants</span>
                                <span class="table-hero-value" id="tableHeroParticipants">0/0</span>
                            </div>
                            <div class="table-hero-card" data-type="recordings">
                                <span class="table-hero-label">Recordings</span>
                                <span class="table-hero-value" id="tableHeroRecordings">0</span>
                            </div>
                            <div class="table-hero-card" data-type="status" id="tableHeroStatusCard" data-status="ready">
                                <span class="table-hero-label">Status</span>
                                <span class="table-hero-value" id="tableHeroStatus">Ready</span>
                            </div>
                            <div class="table-hero-card" data-type="updated">
                                <span class="table-hero-label">Updated</span>
                                <span class="table-hero-value" id="tableHeroUpdated">moments ago</span>
                            </div>
                        </div>
                    </header>
                    <main class="screen-panel__body table-interface__body" role="main">
                        <div class="table-interface__grid">
                            <div class="table-interface__column table-interface__column--primary">
                                <section class="card table-interface__card">
                                    <header class="card__header">
                                        <h2 class="card__title">Live Transcription Controls</h2>
                                        <span class="badge badge-primary" id="liveTranscriptionCount">0</span>
                                    </header>
                                    <div class="card-body table-interface__controls">
                                        <div class="live-transcription__actions">
                                            <button type="button" id="liveTranscriptionBtn" class="btn btn-primary btn-lg">Start Live Transcription</button>
                                            <button type="button" id="stopLiveTranscriptionBtn" class="btn btn-secondary btn-lg is-hidden">Stop</button>
                                        </div>
                                        <p class="helper-text">Start recording to see real-time speech-to-text transcription.</p>
                                        <div id="audioWaveContainer" class="audio-visualizer is-hidden">
                                            <div class="audio-visualizer__label">üéôÔ∏è Listening...</div>
                                            <div id="audioWave" class="audio-visualizer__wave"></div>
                                            <div class="audio-visualizer__meta">Audio level: <span id="audioLevel">0%</span></div>
                                        </div>
                                    </div>
                                </section>

                                <section class="card table-interface__card">
                                    <header class="card__header">
                                        <h2 class="card__title">Transcription Stream</h2>
                                    </header>
                                    <div id="liveTranscriptionContent" class="transcription-scroll">
                                        <div id="transcriptionDisplay" hidden></div>
                                        <div id="emptyTranscriptionState" class="empty-state">
                                            <div class="empty-state__icon">üéôÔ∏è</div>
                                            <h5 class="empty-state__title">Ready for Live Transcription</h5>
                                            <p class="empty-state__description">Start recording to see real-time speech-to-text transcription.</p>
                                            <p class="empty-state__meta">Results will appear here with timestamps and speaker identification.</p>
                                        </div>
                                    </div>
                                </section>

                                <section class="card table-interface__card">
                                    <header class="card__header">
                                        <h2 class="card__title">Table Recordings</h2>
                                        <span id="tableRecordingCountBadge" class="badge badge-neutral">0</span>
                                    </header>
                                    <div class="card__header-actions table-interface__actions">
                                        <button type="button" class="btn btn-primary btn-sm" onclick="showAudioRecording()">üé§ Record Audio</button>
                                        <button type="button" class="btn btn-secondary btn-sm" onclick="showUploadMedia()">üìÅ Upload Media</button>
                                    </div>
                                    <div id="audioPlayerContainer" class="table-recordings">
                                        <div id="tableRecordingsList" class="recording-list is-hidden" role="list"></div>
                                        <div id="tableRecordingsEmpty" class="empty-state">
                                            <div class="empty-state__icon">üéôÔ∏è</div>
                                            <h5 class="empty-state__title">No recordings available yet</h5>
                                            <p class="empty-state__description">Audio recordings will appear here after processing.</p>
                                        </div>
                                    </div>
                                </section>
                            </div>
                        </div>
                    </main>
                </div>

                <div
                    id="audioRecordingModal"
                    class="modal-overlay is-hidden"
                    role="dialog"
                    aria-modal="true"
                    aria-labelledby="audioRecordingTitle"
                >
                    <div class="modal modal--narrow">
                        <header class="modal-header">
                            <h3 id="audioRecordingTitle" class="modal-title">üé§ Audio Recording</h3>
                            <button
                                type="button"
                                class="btn btn-ghost btn-icon modal-close"
                                onclick="hideAudioRecording()"
                                aria-label="Close audio recording dialog"
                            >
                                ‚úï
                            </button>
                        </header>
                        <div class="modal-body modal-body--stacked">
                            <p class="modal-description">Record audio that will be processed for transcription.</p>
                            <div class="modal-actions">
                                <button type="button" id="startRecordingBtn" class="btn btn-primary" onclick="startRecording()">Start Recording</button>
                                <button type="button" id="stopRecordingBtn" class="btn btn-secondary is-hidden" onclick="stopRecording()">Stop Recording</button>
                                <button type="button" class="btn btn-ghost" onclick="hideAudioRecording()">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div
                    id="uploadMediaModal"
                    class="modal-overlay is-hidden"
                    role="dialog"
                    aria-modal="true"
                    aria-labelledby="uploadMediaTitle"
                >
                    <div class="modal modal--narrow">
                        <header class="modal-header">
                            <h3 id="uploadMediaTitle" class="modal-title">üìÅ Upload Media</h3>
                            <button
                                type="button"
                                class="btn btn-ghost btn-icon modal-close"
                                onclick="hideUploadMedia()"
                                aria-label="Close upload media dialog"
                            >
                                ‚úï
                            </button>
                        </header>
                        <div class="modal-body modal-body--stacked">
                            <p class="modal-description">Select audio or video files for transcription.</p>
                            <div class="modal-actions">
                                <button type="button" class="btn btn-primary" onclick="selectMediaFile()">Choose File</button>
                                <button type="button" class="btn btn-secondary" onclick="hideUploadMedia()">Cancel</button>
                            </div>
                            <div id="uploadProgress" class="upload-progress is-hidden">
                                <p id="uploadFileName" class="upload-progress__name">No file selected</p>
                                <div class="upload-progress__bar">
                                    <span id="uploadProgressBar" class="upload-progress__indicator"></span>
                                </div>
                                <p id="uploadStatus" class="upload-progress__status">Preparing...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <input type="file" id="mediaFileInput" accept="audio/*,video/*,.mp3,.wav,.mp4,.m4a,.webm,.ogg,.mov,.avi" hidden>
            </div>
            <!-- Active Sessions -->
            <div id="sessionListScreen" class="screen">
                <div class="screen-cover screen-cover--gradient">
                    <div class="screen-panel screen-panel--wide">
                        <header class="screen-panel__header session-list__header">
                            <div class="screen-panel__heading session-list__heading">
                                <h1 class="screen-panel__title session-list__title">
                                    <span aria-hidden="true">üìã</span>
                                    Active Sessions
                                </h1>
                                <p class="screen-panel__subtitle session-list__subtitle">Join existing World Caf√© sessions</p>
                            </div>
                            <div class="screen-panel__actions session-list__actions">
                                <button type="button" class="btn btn-secondary btn-sm" onclick="showWelcome()">
                                    ‚Üê Back
                                </button>
                            </div>
                        </header>
                        <div class="screen-panel__body session-list__body">
                            <div class="search-bar" id="searchInputContainer" role="search">
                                <span class="search-bar__icon" aria-hidden="true">üîç</span>
                                <input
                                    type="text"
                                    id="sessionsSearchInput"
                                    class="search-bar__input"
                                    placeholder="Search sessions..."
                                    aria-label="Search sessions"
                                    oninput="filterSessions()"
                                    onfocus="handleSearchFocus()"
                                    onblur="handleSearchBlur()"
                                />
                                <button type="button" id="clearSearchBtn" class="btn btn-secondary btn-sm is-hidden" onclick="clearSearch()" title="Clear search">
                                    Clear
                                </button>
                            </div>
                            <div id="searchResults" class="search-meta is-hidden" aria-live="polite"></div>

                            <section id="sessionsList" class="session-grid" aria-label="Available sessions">
                                <!-- Sessions populated via JS -->
                            </section>
                        </div>
                    </div>
                </div>
            </div>
            <!-- All Transcriptions Screen -->
            <div id="allTranscriptionsScreen" class="screen">
                <div class="screen-cover screen-cover--gradient">
                    <div class="screen-panel screen-panel--wide">
                        <header class="screen-panel__header">
                            <button type="button" class="btn btn-ghost btn-icon" onclick="showSessionList()" aria-label="Back to sessions">‚Üê</button>
                            <div class="screen-panel__heading">
                                <h1 id="allTranscriptionsTitle" class="screen-panel__title">üìù All Transcriptions</h1>
                                <p id="allTranscriptionsSubtitle" class="screen-panel__subtitle">Session Overview</p>
                            </div>
                        </header>
                        <div class="screen-panel__body">
                            <section class="stat-grid">
                                <article class="stat-card">
                                    <div class="stat-card__icon">üìä</div>
                                    <div class="stat-card__label">Total</div>
                                    <div class="stat-card__value" id="totalTranscriptions">0</div>
                                </article>
                                <article class="stat-card">
                                    <div class="stat-card__icon">üì¢</div>
                                    <div class="stat-card__label">Tables</div>
                                    <div class="stat-card__value" id="activeTables">0</div>
                                </article>
                                <article class="stat-card">
                                    <div class="stat-card__icon">‚è±Ô∏è</div>
                                    <div class="stat-card__label">Duration</div>
                                    <div class="stat-card__value" id="totalDuration">0min</div>
                                </article>
                                <article class="stat-card">
                                    <div class="stat-card__icon">üë•</div>
                                    <div class="stat-card__label">Speakers</div>
                                    <div class="stat-card__value" id="totalSpeakers">0</div>
                                </article>
                            </section>

                            <div class="toolbar">
                                <div class="toolbar__group">
                                    <label class="label" for="tableFilter">Table</label>
                                    <select id="tableFilter" class="input">
                                        <option value="">üåê All Tables</option>
                                    </select>
                                </div>
                                <div class="toolbar__group">
                                    <label class="label" for="sortFilter">Sort By</label>
                                    <select id="sortFilter" class="input">
                                        <option value="newest">üïê Newest First</option>
                                        <option value="oldest">üïë Oldest First</option>
                                        <option value="table">üì¢ By Table</option>
                                        <option value="duration">‚è±Ô∏è By Duration</option>
                                    </select>
                                </div>
                                <div class="toolbar__actions">
                                    <button type="button" class="btn btn-primary btn-sm" onclick="exportAllTranscriptions()">üì• Export All</button>
                                    <input type="file" id="importSessionFile" accept=".json" hidden onchange="importSession(event)">
                                    <button type="button" class="btn btn-secondary btn-sm" onclick="document.getElementById('importSessionFile').click()">üì§ Import Session</button>
                                    <button type="button" class="btn btn-secondary btn-sm" onclick="refreshTranscriptions()">üîÑ Refresh</button>
                                </div>
                            </div>

                            <section id="allTranscriptionsList" class="transcription-grid">
                                <!-- Transcriptions populated via JS -->
                            </section>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Admin Dashboard - CLEAN REDESIGN -->
            <div id="adminDashboard" class="screen">
                <div class="screen-cover screen-cover--gradient">
                    <div class="screen-panel screen-panel--wide admin-shell">
                        <header class="screen-panel__header admin-shell__header">
                            <button type="button" class="btn btn-ghost btn-icon" onclick="showWelcome()" aria-label="Back to home">‚Üê</button>
                            <div class="screen-panel__heading admin-shell__heading">
                                <h1 class="screen-panel__title">Admin Dashboard</h1>
                                <p class="screen-panel__subtitle">World Caf√© Platform Administration</p>
                            </div>
                            <span class="screen-panel__badge admin-shell__status">
                                <span class="status-indicator" aria-hidden="true"></span>
                                System Online
                            </span>
                        </header>

                        <div class="screen-panel__body admin-shell__body">
                            <!-- Admin Login -->
                            <section id="adminLogin" class="admin-auth">
                                <form id="adminLoginForm" class="card admin-auth__card" novalidate>
                                    <div class="admin-auth__header">
                                        <span class="admin-auth__icon" aria-hidden="true">üîê</span>
                                        <h2 class="admin-auth__title">Admin Access Required</h2>
                                        <p class="admin-auth__subtitle">Please enter your administrator password to continue</p>
                                    </div>
                                    <div class="form-group">
                                        <label class="label" for="adminPassword">Password</label>
                                        <input type="password" id="adminPassword" class="input" placeholder="Enter admin password" autocomplete="current-password">
                                    </div>
                                    <div class="admin-auth__actions">
                                        <button type="submit" class="btn btn-primary btn-full">Access Dashboard</button>
                                    </div>
                                </form>
                            </section>

                            <!-- Admin Panel -->
                            <section id="adminPanel" class="admin-panel is-hidden">
                                <nav class="admin-nav" aria-label="Admin sections">
                                    <button type="button" class="admin-nav-card admin-nav-card--sessions active" id="sessionsNavCard" onclick="showAdminTab('sessions')">
                                        <span aria-hidden="true">üìä</span>
                                        <span>Sessions</span>
                                        <span id="sessionsCount" class="admin-nav-card__badge">-</span>
                                    </button>
                                    <button type="button" class="admin-nav-card admin-nav-card--stats" id="statsNavCard" onclick="showAdminTab('stats')">
                                        <span aria-hidden="true">üìà</span>
                                        <span>Analytics</span>
                                    </button>
                                    <button type="button" class="admin-nav-card admin-nav-card--system" id="systemNavCard" onclick="showAdminTab('system')">
                                        <span aria-hidden="true">‚öôÔ∏è</span>
                                        <span>System</span>
                                    </button>
                                    <button type="button" class="admin-nav-card admin-nav-card--settings" id="settingsNavCard" onclick="showAdminTab('settings')">
                                        <span aria-hidden="true">üîß</span>
                                        <span>Settings</span>
                                    </button>
                                </nav>

                                <div class="admin-panel__content">
                        <!-- Sessions Panel -->
                        <div id="adminSessionsTab" class="admin-sessions active" role="region" aria-labelledby="adminSessionsHeading">
                            <section class="card admin-sessions__card">
                                <div class="card-header admin-sessions__header">
                                    <div class="admin-sessions__heading">
                                        <h2 id="adminSessionsHeading" class="card__title">üìä Session Management</h2>
                                        <p class="card__subtitle">Monitor and manage all platform sessions</p>
                                    </div>
                                    <div class="card__header-actions">
                                        <button type="button" class="btn btn-secondary btn-sm" onclick="refreshAdminSessions()">
                                            üîÑ Refresh
                                        </button>
                                    </div>
                                </div>

                                <div class="card-body admin-sessions__body">
                                    <section class="stat-grid admin-sessions__stats" aria-label="Session statistics">
                                        <article class="stat-card">
                                            <div class="stat-card__icon">üü¢</div>
                                            <div>
                                                <div class="stat-card__label">Active Sessions</div>
                                                <div class="stat-card__value" id="adminActiveCount">-</div>
                                            </div>
                                        </article>
                                        <article class="stat-card">
                                            <div class="stat-card__icon">üìù</div>
                                            <div>
                                                <div class="stat-card__label">Closed Sessions</div>
                                                <div class="stat-card__value" id="adminClosedCount">-</div>
                                            </div>
                                        </article>
                                        <article class="stat-card">
                                            <div class="stat-card__icon">üóëÔ∏è</div>
                                            <div>
                                                <div class="stat-card__label">Deleted Sessions</div>
                                                <div class="stat-card__value" id="adminDeletedCount">-</div>
                                            </div>
                                        </article>
                                        <article class="stat-card">
                                            <div class="stat-card__icon">üìÖ</div>
                                            <div>
                                                <div class="stat-card__label">Recent (7 days)</div>
                                                <div class="stat-card__value" id="adminRecentCount">-</div>
                                            </div>
                                        </article>
                                    </section>

                                    <div class="toolbar admin-sessions__filters" role="search">
                                        <div class="toolbar__group">
                                            <label class="label" for="statusFilter">Status</label>
                                            <select id="statusFilter" class="input" onchange="filterAdminSessions()">
                                                <option value="">All Sessions</option>
                                                <option value="active">Active</option>
                                                <option value="closed">Closed</option>
                                                <option value="deleted">Deleted</option>
                                                <option value="completed">Completed</option>
                                            </select>
                                        </div>
                                        <div class="toolbar__group toolbar__group--inline">
                                            <label class="form-switch form-switch--inline">
                                                <input type="checkbox" id="includeDeleted" class="form-switch__input" onchange="filterAdminSessions()">
                                                <span class="form-switch__track" aria-hidden="true">
                                                    <span class="form-switch__thumb"></span>
                                                </span>
                                                <span class="form-switch__content">
                                                    <span class="form-switch__label">Include Deleted</span>
                                                </span>
                                            </label>
                                        </div>
                                    </div>

                                    <section class="card admin-sessions__list" aria-label="Session results">
                                        <header class="card__header">
                                            <div>
                                                <h3 class="card__title">Sessions</h3>
                                                <p class="card__subtitle">Results update as filters change</p>
                                            </div>
                                        </header>
                                        <div class="card-body admin-sessions__results" id="adminSessionsList">
                                            <!-- Sessions will be loaded here -->
                                        </div>
                                    </section>
                                </div>
                            </section>
                        </div>


                        <!-- Analytics Panel -->
                        <div id="adminStatsTab" class="modern-admin-tab">
                            <div class="tab-header">
                                <h2>üìà Platform Analytics</h2>
                                <p>Comprehensive platform usage and performance metrics</p>
                            </div>
                            
                            <div class="analytics-dashboard">
                                <div class="analytics-card">
                                    <h3>üìÖ Usage Overview</h3>
                                    <div id="platformStats" class="platform-stats">
                                        <!-- Statistics will be loaded here -->
                                    </div>
                                </div>
                                
                                <div class="analytics-card">
                                    <h3>üìä Performance Metrics</h3>
                                    <div class="metrics-grid">
                                        <div class="metric-item">
                                            <span class="metric-label">Avg Session Duration</span>
                                            <span class="metric-value">45 min</span>
                                        </div>
                                        <div class="metric-item">
                                            <span class="metric-label">Total Transcriptions</span>
                                            <span class="metric-value">1,247</span>
                                        </div>
                                        <div class="metric-item">
                                            <span class="metric-label">Active Users</span>
                                            <span class="metric-value">89</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- System Panel -->
                        <div id="adminSystemTab" class="modern-admin-tab">
                            <div class="tab-header">
                                <h2>‚öôÔ∏è System Status</h2>
                                <p>Server health, database status, and system logs</p>
                            </div>
                            
                            <div class="system-dashboard">
                                <div class="system-card">
                                    <h3>üü¢ Server Health</h3>
                                    <div class="health-indicators">
                                        <div class="health-item">
                                            <span class="health-label">Database</span>
                                            <span class="health-status connected">‚úì Connected</span>
                                        </div>
                                        <div class="health-item">
                                            <span class="health-label">WebSocket</span>
                                            <span class="health-status connected">‚úì Active</span>
                                        </div>
                                        <div class="health-item">
                                            <span class="health-label">Deepgram API</span>
                                            <span class="health-status connected" id="deepgramStatus">‚úì Available</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="system-card">
                                    <h3>üìÑ Recent Activity</h3>
                                    <div class="activity-log">
                                        <div class="activity-item">
                                            <span class="activity-time">2 min ago</span>
                                            <span class="activity-desc">New session created</span>
                                        </div>
                                        <div class="activity-item">
                                            <span class="activity-time">5 min ago</span>
                                            <span class="activity-desc">Audio transcribed</span>
                                        </div>
                                        <div class="activity-item">
                                            <span class="activity-time">12 min ago</span>
                                            <span class="activity-desc">User joined table</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Settings Panel -->
                        <div id="adminSettingsTab" class="modern-admin-tab">
                            <div class="tab-header">
                                <h2>üîß Platform Settings</h2>
                                <p>Configure API keys, admin credentials, and system settings</p>
                            </div>
                            
                            <div class="settings-dashboard">
                                <section class="settings-card">
                                    <header class="settings-card__header">
                                        <div class="settings-card__heading">
                                            <h3 class="settings-card__title">
                                                <span aria-hidden="true">üîë</span>
                                                API Configuration
                                            </h3>
                                            <p class="settings-card__subtitle">Configure external service API keys</p>
                                        </div>
                                    </header>
                                    <div class="settings-card__body">
                                        <div class="form-grid form-grid--stacked">
                                            <div class="form-group">
                                                <label class="label" for="deepgramApiKey">Deepgram API Key</label>
                                                <div class="input-group">
                                                    <input type="password" id="deepgramApiKey" class="input" placeholder="Enter Deepgram API key">
                                                    <button type="button" class="input-group__button" onclick="toggleApiKeyVisibility('deepgramApiKey')">üëÅÔ∏è</button>
                                                </div>
                                                <p class="helper-text helper-text--muted">Used for speech-to-text transcription services</p>
                                            </div>
                                            <div class="form-group">
                                                <label class="label" for="deepgramModelSelect">Deepgram Model</label>
                                                <select id="deepgramModelSelect" class="input">
                                                    <option value="nova-2-meeting">Nova 2 Meeting (default)</option>
                                                    <option value="nova-2-general">Nova 2 General</option>
                                                    <option value="nova-2-phonecall">Nova 2 Phonecall</option>
                                                </select>
                                                <p class="helper-text helper-text--muted">Choose the default model for live and prerecorded transcriptions</p>
                                            </div>
                                        </div>
                                        <div class="settings-card__actions">
                                            <button type="button" onclick="updateApiKeys()" class="btn btn-primary">üíæ Save API Keys</button>
                                            <button type="button" onclick="testApiKeys()" class="btn btn-secondary">üß™ Test APIs</button>
                                        </div>
                                    </div>
                                </section>

                                <section class="settings-card">
                                    <header class="settings-card__header">
                                        <div class="settings-card__heading">
                                            <h3 class="settings-card__title">
                                                <span aria-hidden="true">üîê</span>
                                                Admin Security
                                            </h3>
                                            <p class="settings-card__subtitle">Change admin password and security settings</p>
                                        </div>
                                    </header>
                                    <div class="settings-card__body">
                                        <div class="form-grid form-grid--stacked">
                                            <div class="form-group">
                                                <label class="label" for="currentPassword">Current Password</label>
                                                <input type="password" id="currentPassword" class="input" placeholder="Enter current admin password">
                                            </div>
                                            <div class="form-group">
                                                <label class="label" for="newPassword">New Password</label>
                                                <input type="password" id="newPassword" class="input" placeholder="Enter new admin password">
                                                <p class="helper-text helper-text--muted">Minimum 8 characters, include letters and numbers</p>
                                            </div>
                                            <div class="form-group">
                                                <label class="label" for="confirmPassword">Confirm New Password</label>
                                                <input type="password" id="confirmPassword" class="input" placeholder="Confirm new admin password">
                                            </div>
                                        </div>
                                        <div class="settings-card__actions">
                                            <button type="button" onclick="changeAdminPassword()" class="btn btn-primary">üîí Change Password</button>
                                        </div>
                                    </div>
                                </section>

                                <section class="settings-card">
                                    <header class="settings-card__header">
                                        <div class="settings-card__heading">
                                            <h3 class="settings-card__title">
                                                <span aria-hidden="true">üõ°Ô∏è</span>
                                                Platform Protection
                                            </h3>
                                            <p class="settings-card__subtitle">Enable password protection for the entire platform</p>
                                        </div>
                                    </header>
                                    <div class="settings-card__body">
                                        <div class="form-grid form-grid--stacked">
                                            <label class="form-switch">
                                                <input type="checkbox" id="platformPasswordEnabled" class="form-switch__input">
                                                <span class="form-switch__track" aria-hidden="true">
                                                    <span class="form-switch__thumb"></span>
                                                </span>
                                                <div class="form-switch__content">
                                                    <span class="form-switch__label">Enable Platform Password Protection</span>
                                                    <span class="form-switch__description">When enabled, all users must enter a password to access the platform</span>
                                                </div>
                                            </label>
                                            <div id="platformPasswordRow" class="form-group settings-card__conditional is-hidden">
                                                <label class="label" for="platformPassword">Platform Password</label>
                                                <input type="password" id="platformPassword" class="input" placeholder="Enter platform access password">
                                                <p class="helper-text helper-text--muted">Default: testtesttest</p>
                                            </div>
                                        </div>
                                        <div class="settings-card__actions">
                                            <button type="button" onclick="savePlatformProtection()" class="btn btn-primary">üíæ Save Protection Settings</button>
                                        </div>
                                    </div>
                                </section>

                                <section class="settings-card">
                                    <header class="settings-card__header">
                                        <div class="settings-card__heading">
                                            <h3 class="settings-card__title">
                                                <span aria-hidden="true">üìä</span>
                                                Configuration Status
                                            </h3>
                                            <p class="settings-card__subtitle">Current system configuration overview</p>
                                        </div>
                                    </header>
                                    <div class="settings-card__body">
                                        <dl class="config-status settings-status">
                                            <div class="settings-status__item">
                                                <dt class="settings-status__label">Deepgram API</dt>
                                                <dd class="settings-status__badge">
                                                    <span class="config-status-badge" id="deepgramConfigStatus">Not Configured</span>
                                                </dd>
                                            </div>
                                            <div class="settings-status__item">
                                                <dt class="settings-status__label">Database</dt>
                                                <dd class="settings-status__badge">
                                                    <span class="config-status-badge configured">Configured</span>
                                                </dd>
                                            </div>
                                            <div class="settings-status__item">
                                                <dt class="settings-status__label">File Uploads</dt>
                                                <dd class="settings-status__badge">
                                                    <span class="config-status-badge configured">Enabled</span>
                                                </dd>
                                            </div>
                                        </dl>
                                    </div>
                                </section>
                            </div>
                        </div>
                    </div>
                </section>
                        </div>
                    </div>
                </div>
            </div>
      </div>

        </main>

        <!-- Loading Overlay -->
        <div id="loadingOverlay" class="loading-overlay">
            <div class="loading-spinner"></div>
            <p id="loadingMessage">Processing...</p>
        </div>

        <!-- Mobile QR Scanner -->
        <div
            id="mobileScanner"
            class="modal-overlay is-hidden"
            role="dialog"
            aria-modal="true"
            aria-labelledby="mobileScannerTitle"
        >
            <div class="modal modal--wide modal--tall">
                <header class="modal-header">
                    <h3 id="mobileScannerTitle" class="modal-title">Scan QR Code</h3>
                    <button type="button" class="btn btn-ghost btn-icon modal-close" id="closeScannerBtn" aria-label="Close QR scanner">‚úï</button>
                </header>
                <div class="modal-body modal-body--stacked">
                    <p class="modal-description">Point your camera at a World Caf√© QR code to join a session or table.</p>
                    <div class="scanner-viewfinder" role="presentation">
                        <video id="qrVideo" class="scanner-video" autoplay playsinline></video>
                    </div>
                </div>
                <footer class="modal-footer">
                    <div class="modal-actions modal-actions--spread">
                        <button type="button" class="btn btn-secondary" id="manualJoinBtn">üîó Enter Code</button>
                    </div>
                </footer>
            </div>
        </div>

        <!-- Manual Join Modal -->
        <div
            id="manualJoinModal"
            class="modal-overlay is-hidden"
            role="dialog"
            aria-modal="true"
            aria-labelledby="manualJoinTitle"
        >
            <div class="modal modal--narrow">
                <header class="modal-header">
                    <h3 id="manualJoinTitle" class="modal-title">Enter Code or Password</h3>
                    <button type="button" class="btn btn-ghost btn-icon modal-close" id="closeManualJoinBtn" aria-label="Close manual join dialog">‚úï</button>
                </header>
                <div class="modal-body modal-body--stacked">
                    <div class="form-group">
                        <label class="label" for="manualCode">Session/Table Code or Password</label>
                        <input
                            type="text"
                            id="manualCode"
                            class="input"
                            placeholder="Enter session code, table code, or password"
                            autocomplete="off"
                            spellcheck="false"
                            maxlength="60"
                        >
                        <p class="helper-text helper-text--muted">
                            Accepts session codes, table codes, admin passwords, or table passwords.
                        </p>
                    </div>
                </div>
                <footer class="modal-footer">
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="cancelManualJoinBtn">Cancel</button>
                        <button type="button" class="btn btn-primary" id="submitManualJoinBtn">Join</button>
                    </div>
                </footer>
            </div>
        </div>

        <!-- Session Management Modals -->
        <div
            id="sessionActionModal"
            class="modal-overlay is-hidden"
            role="dialog"
            aria-modal="true"
            aria-labelledby="actionModalTitle"
        >
            <div class="modal modal--narrow">
                <header class="modal-header">
                    <h3 id="actionModalTitle" class="modal-title">Session Action</h3>
                    <button type="button" class="btn btn-ghost btn-icon modal-close" id="cancelActionBtn" aria-label="Close session action dialog">‚úï</button>
                </header>
                <div class="modal-body modal-body--stacked">
                    <div class="form-group">
                        <label class="label" for="actionReason">Reason (optional)</label>
                        <textarea id="actionReason" class="textarea" rows="3" placeholder="Enter reason for this action..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="label" for="adminUser">Admin User</label>
                        <input type="text" id="adminUser" class="input" value="admin" placeholder="Admin username">
                    </div>
                </div>
                <footer class="modal-footer">
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="dismissActionBtn">Cancel</button>
                        <button type="button" class="btn btn-danger" id="confirmActionBtn">Confirm</button>
                    </div>
                </footer>
            </div>
        </div>

        <!-- Session History Modal -->
        <div
            id="sessionHistoryModal"
            class="modal-overlay is-hidden"
            role="dialog"
            aria-modal="true"
            aria-labelledby="sessionHistoryTitle"
        >
            <div class="modal modal--wide modal--tall">
                <header class="modal-header">
                    <h3 id="sessionHistoryTitle" class="modal-title">Session History</h3>
                    <button type="button" class="btn btn-ghost btn-icon modal-close" id="closeHistoryBtn" aria-label="Close session history dialog">‚úï</button>
                </header>
                <div class="modal-body modal-body--scroll">
                    <div id="sessionHistoryContent" class="session-history" role="log" aria-live="polite">
                        <!-- History will be loaded here -->
                    </div>
                </div>
                <footer class="modal-footer">
                    <div class="modal-actions modal-actions--end">
                        <button type="button" class="btn btn-secondary" id="dismissHistoryBtn">Close</button>
                    </div>
                </footer>
            </div>
        </div>

        <!-- Transcription Preview Modal -->
        <div
            id="transcriptionPreviewModal"
            class="modal-overlay is-hidden"
            role="dialog"
            aria-modal="true"
            aria-labelledby="transcriptionPreviewTitle"
            aria-describedby="transcriptionPreviewDescription"
        >
            <div id="transcriptionPreviewDialog" class="modal modal--wide modal--tall" tabindex="-1">
                <header class="modal-header">
                    <h3 id="transcriptionPreviewTitle" class="modal-title">Transcript Preview</h3>
                    <button
                        type="button"
                        class="btn btn-ghost btn-icon modal-close"
                        id="closeTranscriptionPreviewBtn"
                        aria-label="Close transcription preview"
                    >
                        ‚úï
                    </button>
                </header>
                <div class="modal-body modal-body--scroll">
                    <p id="transcriptionPreviewDescription" class="modal-description">
                        Review recording metadata, speaker segments, and the full transcript for the selected table conversation.
                    </p>
                    <div class="transcription-preview">
                        <div id="transcriptionPreviewMeta" class="transcription-preview__meta"></div>
                        <section class="transcription-preview__section">
                            <header class="transcription-preview__section-header">
                                <h4 class="transcription-preview__section-title">Speaker Breakdown</h4>
                            </header>
                            <div id="transcriptionPreviewSegments" class="transcription-preview__segments"></div>
                        </section>
                        <section
                            id="transcriptionPreviewFullTextSection"
                            class="transcription-preview__section is-hidden"
                            hidden
                        >
                            <header class="transcription-preview__section-header">
                                <h4 class="transcription-preview__section-title">Full Transcript</h4>
                            </header>
                            <p id="transcriptionPreviewFullText" class="transcription-preview__full-text"></p>
                        </section>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast notifications container -->
        <div id="toastContainer" class="toast-container"></div>
    </div>


    <script src="app.js"></script>
</body>
</html>
